input = [
%{state: "..##.#...#", buttons: [ [0,3,4,7,9], [0,1,9], [1,2,3,4,5], [0,1,3,7,8], [1,3,4,5,6,7,9], [0,1,2,4,5,6,7,8], [0,1,2,3,5,6,8], [1,2,4,5,8,9], [0,4,5,6,7], [0,2,3,5,8,9], [0,2,6,7,8,9] ]},
%{state: "..#.#.#..", buttons: [ [0,6,7,8], [0,1,2,3,4,5,6], [2,4,6], [0,1,3,7,8], [0,3,4], [0,2,3,6], [0,1,3,5,6,8] ]},
%{state: "#...#", buttons: [ [1,2,3,4], [0,2,3,4], [0,1,2,3] ]},
%{state: "#.#..#.##", buttons: [ [0,2,5], [1,3,4,5,6,8], [0,2,3,6,8], [0,1,3,8], [0,2,4,6], [3,4,5], [0], [0,1,2,4,5,6], [2,3,4,7], [0,3,4,5,6,7,8], [1,8] ]},
%{state: "..###.#..#", buttons: [ [1,2,3,4,5,6,8,9], [1,6], [1,2,5,7], [1,3,6], [0,3,4,5,6,9], [1,4,6,8], [2,3,4,5,6,7], [0,2,4,5,8], [0,2,4,5,9], [0,1,2,6,7,9], [1,3,5,9] ]},
%{state: "##...##.##", buttons: [ [3,5], [1,3,4,5,9], [5,6,7], [1,2,4,5,6,7,8,9], [0,1,4,5,6,7,8,9], [8,9], [0,2,5,9], [0,4,7,9], [1,3,5,7], [0], [0,1,2] ]},
%{state: "#..##", buttons: [ [0], [0,3], [0,2], [1,4], [1,2], [1,3,4] ]},
%{state: "...#", buttons: [ [0,1,2], [1,2,3], [1,2], [3], [0,2,3] ]},
%{state: "###..", buttons: [ [0,1,2], [0,3,4], [0,3], [1,2,4] ]},
%{state: "........#", buttons: [ [3,5], [1,2,5,6,7,8], [0,1,5], [1,3,4,8], [1,2,3,4,5,8], [0,1,6], [0,2,3,4,5,8], [2,3,4,5,6,7], [1,2,3,4,5], [1,2,3,4,5,7,8], [0,1,2,4,5,6,7,8] ]},
%{state: ".##..#..", buttons: [ [4,6], [0,1,3,4,6,7], [1,2,4,5,6,7], [0,2,3,5,7], [0,2], [1,2,3,6,7], [1,2,5], [0,2,3,4,5,6,7] ]},
%{state: "..#.", buttons: [ [1,2,3], [1,3], [0,3] ]},
%{state: "###..", buttons: [ [1,2], [0,1,2], [1,3], [0,1,4] ]},
%{state: "...##.", buttons: [ [0,1,2,4,5], [0,2,5], [0,1,5], [0,2,3,4], [0,4] ]},
%{state: "..#.#..##.", buttons: [ [0,2,3,4,8,9], [1,3,5,6,7,9], [2,5,6,7,9], [0,1,3,5,8,9], [3,5,9], [0,1,4,7,8,9], [0,2,7,9], [4,5,9], [0,4,5,8,9] ]},
%{state: ".#..##.#.", buttons: [ [1,3,6,8], [0,1,2,3,5,7,8], [0,1,2,5,6,8], [1,2,3,4,5,6,8], [6], [0,1,2,3,4,5,7], [1,3,4,6,7], [0,1,2,5,7], [0,1,2,3,4], [0,1,2,3,4,6,7] ]},
%{state: ".##.#.", buttons: [ [0,4,5], [2,5], [0,3,4,5], [0,2,3,4,5], [1,2,3,4] ]},
%{state: ".##.#", buttons: [ [3,4], [2,4], [0,2,4], [0,1,2], [0,1], [0,3] ]},
%{state: ".#.#...###", buttons: [ [5,8,9], [0,1,2,4,5,6,7,9], [2,6,8], [2,3,4,5,6,9], [3,4], [3,4,5,7,8,9], [4,9], [4,6], [3,5,6,7], [0,4,7,9] ]},
%{state: "#####.", buttons: [ [1,3,5], [0,1,2,3], [2,4], [0,1,2], [0,2,3], [3,4], [0,1,3,4] ]},
%{state: "#.##.#", buttons: [ [1,5], [2,3], [1,3,4], [0,1,4], [0,1,2,3], [1], [0,2] ]},
%{state: "...#.##", buttons: [ [2,4], [0,3,6], [0,1,2,3], [0,2,3], [0,1,2,5,6], [1,5] ]},
%{state: "#...##", buttons: [ [0,1,3], [3,4,5], [0,2,3,5], [1,3,4,5], [1], [0,2] ]},
%{state: "#.#.#.##", buttons: [ [0,1,2,3,4,5,7], [0,1,6], [2,3,7], [1,2,3,4,6,7], [0,1,2,3,4,6,7], [1,3] ]},
%{state: "#...####", buttons: [ [1,2,3,4,5,6], [0,3,5], [1,3,5], [0,2,5,6], [0,4,6,7], [1,3,4,5,7], [1,2,3,4], [0,2,3,6] ]},
%{state: "#..##", buttons: [ [2,4], [1,3,4], [1,3], [0,3], [0,2], [1,2,3] ]},
%{state: "...##", buttons: [ [1,2,4], [2,3,4], [1,3,4], [0,2,4], [0,1,2,4], [1,2], [1,3] ]},
%{state: "#...", buttons: [ [0], [0,2], [3], [1,3], [1,2], [0,1,3] ]},
%{state: ".......#.#", buttons: [ [0,1,3,4,5,6,7,8,9], [0,1,2,3,4,7,8,9], [0,5,6,8], [0,3,5], [4,5,8], [4,6,7,8,9], [2,8], [3,6,7], [0,1], [0,1,2,4,5,6,7,9], [6,7], [0,2,3,4,5,6,7,8,9] ]},
%{state: ".#...", buttons: [ [2,3], [4], [2], [1,2,4], [0,1,2,4], [0,1] ]},
%{state: "###.#", buttons: [ [0,2], [0,3,4], [1,4], [1,3], [0,1] ]},
%{state: ".###.#.", buttons: [ [1,5,6], [1,2], [2,3,4,5,6], [2,4,5], [1,2,3,5], [0,2,5,6] ]},
%{state: "#.##..", buttons: [ [0,1,3], [1,2,3,5], [0,1,3,5], [0,1,4,5], [0,2,3,4], [2,3], [1,3], [0,2,3,4,5] ]},
%{state: ".##.#####", buttons: [ [3,6,7], [0,1,2,3,4,5,6], [1,2], [1,3], [1,6,7,8], [1,3,5,7], [0,1,4,5,7,8], [3,7,8], [0,1,2,3,5,7,8], [0,1,4,5,6] ]},
%{state: "#.#..#.#..", buttons: [ [1,3,4,5], [4,6,8,9], [1,4,5,7,8,9], [0,1,2,6,9], [0,1,3,5,7], [0,2,4,9], [1,5], [0,1,2,3,5,6,7,8], [3,6,9] ]},
%{state: "##.##.#", buttons: [ [0,1,5], [0,1,4,6], [0,3,6], [2,3,6], [1,2,3,4], [0,1,2,3,5] ]},
%{state: ".##..#..", buttons: [ [0,1,2,4,5], [0,1,4,5,6], [0,4,6,7], [4,7], [0,1,2,4,6,7], [0,6,7], [2,3,4], [0,2,4,6], [0,1,3,5,6,7] ]},
%{state: "#.#..##", buttons: [ [0,2,4,6], [0,4,5,6], [0], [0,2,3,6], [3,4], [1,2,4,5,6], [0,1,2,3,5], [0,1,3,4], [3,5] ]},
%{state: "#.###", buttons: [ [0,2,3], [0,2,3,4], [1,2,4] ]},
%{state: "#.##", buttons: [ [0,1,3], [0,3], [0], [3], [2,3], [0,1,2] ]},
%{state: "##.#.#.##.", buttons: [ [1,3,6,8], [4,8], [0,2,3,4,5,7,8], [0,4,5], [0,9], [4,5], [0,1,4,5,6,7,9], [1,2,5], [2,3,8], [2,4,5,6,7,8,9] ]},
%{state: ".###...", buttons: [ [2,3,4,5], [0,1,2,4,5], [3,4,5,6], [1], [1,2,3], [0,4], [1,4,5,6], [0,1,2,3,5], [2,6] ]},
%{state: "..##.", buttons: [ [4], [0,1,3,4], [1,4], [0,2,4], [2,3] ]},
%{state: "####.###", buttons: [ [2,4], [5,6,7], [0,1,2,3,5,6,7], [1,2,3,7], [3,5], [0,3,6,7], [1,2,3,4] ]},
%{state: "##.#..", buttons: [ [0,1], [2], [0,3,5], [2,4], [3,4], [0,4,5] ]},
%{state: ".###", buttons: [ [0,1,2], [0,2], [2], [0,2,3], [0] ]},
%{state: "#...#..", buttons: [ [1,6], [3,5,6], [1,2,6], [0,3,5,6], [1,2,3,5], [2], [0,3], [0,3,4,5,6], [1,2,3] ]},
%{state: ".#.#.###", buttons: [ [1,3,4], [3,4], [1,6,7], [0,1,2,4], [0,2,3,4,5,6,7], [0,2,3,6,7] ]},
%{state: ".#.#.....", buttons: [ [3,4,5,6,7,8], [2,4,6,7], [0,1,3,5,6,7,8], [1,6,8], [0,3,4,5,7,8], [5,7], [0,1,2,6,7,8] ]},
%{state: "..##..", buttons: [ [1,4], [2,3,4,5], [1,2,4,5], [1,3,4,5], [0,2], [0,1,3,4,5], [1,2,5], [0,2,5] ]},
%{state: "#..##..#", buttons: [ [1,3,5], [3,7], [0,1,3,4,5,7], [3], [0,3,6], [0,4,5], [5,7], [0,2], [0,1,2,3,5,6] ]},
%{state: "#..#.#", buttons: [ [1,4], [4], [0,1,2,4], [0,1,3,4,5], [0,3,4] ]},
%{state: "#.#######.", buttons: [ [1,8], [0,4,5,7,9], [0,2,3,4,5,6,7,8], [1,3,7], [0,6], [1,5,6], [1,8,9], [2,3,4,5,6,8], [4,6,8], [1,7], [0,3,4,5,7], [3,6,7,8,9], [2,3,5,7] ]},
%{state: "##.###", buttons: [ [0,1,2,4,5], [0,2,3,4], [0,1,3,4,5], [1,3,5] ]},
%{state: ".#..##..##", buttons: [ [0,3,5,8,9], [0,1,2,3,4,5,8,9], [1,4,5,8,9], [1,2,5,6,7,8,9], [0,2,3,4,5,8], [0,3,4,5,6,7,8,9], [0,1,2,5,7,8,9], [0,2,4,5,8], [5,6], [7,8,9], [1,2,3,4,6,7,8], [0,5,8] ]},
%{state: ".#.##..#.", buttons: [ [2,8], [3,5], [1,3,5,6,7,8], [1,3,5,6,8], [0,4,8], [2,3,4,5,6,7], [0,1,2,3,4,6,7], [3,6,8], [1,2], [3,5,6,7,8], [1,3,4,7] ]},
%{state: "#.##.#", buttons: [ [1,2,4,5], [0,4], [0,1,4], [0,5], [0], [0,2,3,5], [1,3,5], [0,1,3,5] ]},
%{state: "....#.#", buttons: [ [0,1,4,5,6], [0,3], [3,4,5,6], [2,3,4,5], [0,1,2,4,5,6], [0,2,3,4], [4,6] ]},
%{state: "#####.", buttons: [ [0,2,3], [0,2], [1,3,5], [0,1], [1,2,3,4], [1,2,4,5] ]},
%{state: "###.####.", buttons: [ [0,7,8], [0,1,2,4,5,6,7], [0,1,3,4,6,7], [0,7], [3,4,5,8], [0,1,4,5,6,7,8], [0,1,2,4,5,6,7,8], [0,2,3] ]},
%{state: "#....#...#", buttons: [ [8,9], [1,3,8], [1,4,6,7,8], [0,1,4,5,6,7,8,9], [1,3,4], [0,1,2,3,4,5,6,9], [1,3,4,6], [0,2,4,5,6,7,8,9], [1,2,3,5,6,7,8,9], [2,3,4,7,8,9] ]},
%{state: "##.###", buttons: [ [0,1,2,5], [1,3,4,5], [0,1,2,3], [2,5], [0,2,3,5], [1,2,4], [0,1,3] ]},
%{state: ".##.#####.", buttons: [ [3,5,7,8,9], [3,5,6,8], [0,3,8], [1,4], [0,2,3,4,5,6,7,9], [0,1], [0,1,2,3,4,5,7,8], [2,3,5,6], [2,4,6,9], [0,4,5], [4,9], [0,1,2,3,4,5,7,9] ]},
%{state: ".#..##.", buttons: [ [1,2,3], [0,1,2,3,5,6], [1,2,4,6], [0,1,4], [0,3,4,5,6], [2,4,5], [1,2,3,4,5] ]},
%{state: "..##.#...", buttons: [ [0,3,4,5,6,7,8], [1,2,4,5,6,7,8], [2,3], [4,5,7], [1,2,3,4,5,6,7], [0,3,4,6,7,8], [1,2,3,6] ]},
%{state: ".#####.", buttons: [ [2,3,4,5,6], [0], [0,1,3,6], [0,2,3,4,6], [2,4], [0,1,4,5,6], [1], [0,1,2,5,6], [4,5] ]},
%{state: "##.##", buttons: [ [3,4], [1,3,4], [2,4], [2,3,4], [0,2,4], [0,3,4], [3] ]},
%{state: "###.", buttons: [ [0,1,3], [0,1,2] ]},
%{state: "#....", buttons: [ [0,2,3,4], [2,3,4], [0,1,3,4] ]},
%{state: "##..", buttons: [ [0,2], [0,1], [2,3], [0,3] ]},
%{state: "..#....", buttons: [ [0,1,3], [0,1,2,3,5,6], [0,1,5], [0,1,6], [0,1,3,4,6] ]},
%{state: ".#..#.#...", buttons: [ [0,1,2,4,5,6,7,8], [0,1], [2,4,7,8], [0,2,3,6,8], [1,2,4], [0,2,4,7], [0,1,3,4,5,6,7,8,9], [2,3,4,5,9], [0,1,2,6,7,9], [0,1,2,4,5,8], [2,3,6,8,9], [1,4] ]},
%{state: "#....###.", buttons: [ [0,3,4,6,7,8], [1,3,4,5,6], [1,3,4,5,6,8], [0,1,2,3,4,6,7,8], [1,8], [2,4,5,6,7], [1,2,5,7,8], [1,2,3,4,6,7], [2,8], [2,4,5,7], [2] ]},
%{state: "..###.#.##", buttons: [ [2,3,5,6], [0,3,6,7], [0,1,4,5,6,7], [1,2,3,4,6,7], [1,7,8,9], [3,9], [1,2,3,4,5,6,7,8], [1,4,5,7,8], [1,3,4,5,9], [0,1,2,4,5,6,7] ]},
%{state: ".#..#.#.", buttons: [ [0,1,2,3,7], [0,1,4,5], [0,2,3,4,7], [1,2,3,7], [0,7], [0,4], [1,2,3,4,6,7], [1,3,6,7], [0,1,2,5,6,7], [3,4,6,7] ]},
%{state: "..###", buttons: [ [0,1,3], [0,1,2,4], [1,4] ]},
%{state: ".##.", buttons: [ [0,1,3], [0,2], [0,1], [3] ]},
%{state: "##.#.#..", buttons: [ [1,4,5,6,7], [3,5], [0,1,3,4,6], [0,2,3,4,5,6], [0,1,2,7], [2,6], [2,3,5,7] ]},
%{state: "....##.##", buttons: [ [0,1,3,5,7,8], [4,5,7,8], [1,2,4,7], [6], [1,3,4], [1,2,3,4,5,8], [0,3,5,6], [5,8], [0,4,5,6,7] ]},
%{state: ".##...##", buttons: [ [4,7], [0,1,3,5,6,7], [0,2,3,5], [0,5,6,7], [3,4,7], [0,2,6,7] ]},
%{state: ".....#####", buttons: [ [1,9], [0,2,3,4,5,6], [0,2,3,4,5,7], [0,2,5], [0,1,3,8], [0,1,2,4,5,8], [4,6,7], [1,3], [5,7], [0,1,2,4,5,6,9], [2,4,5,6,7], [1,2,3,5,6,7,8,9], [4,7,9] ]},
%{state: ".##.##..#", buttons: [ [0,1,2,3,4,5,6,8], [5,6,8], [1,2,3,5,6,8], [1,2,3,6,8], [2,3,4,5,6,7,8], [2,4], [0,1,2,3,5,7,8] ]},
%{state: "##..##", buttons: [ [0,4,5], [0,1,4,5], [0,2], [0,1,2,3,4] ]},
%{state: "#...#..", buttons: [ [0,2,4,5], [0,1,4,6], [0,1,3,5,6], [0,4], [0,3,4,5] ]},
%{state: "....#", buttons: [ [0,1,2,3], [1,2], [0,1,2,3,4] ]},
%{state: "##....##", buttons: [ [0,5,6,7], [1,4], [1,3], [0,1,6,7], [2,3], [0,1,7], [1,2,3,4,6] ]},
%{state: "..#.#....", buttons: [ [0,2,4,5,6,7], [0,4], [8], [0,1,2,5,6], [0,2,3,4,5,7,8], [0,2,3,4,5,6,8], [0,1,2,3,5,6,8], [2,3,5,6,8], [0,4,5,7,8], [0,3,8], [1,8] ]},
%{state: "#..##.#", buttons: [ [2,3,4,5,6], [0,2], [0,1,5,6], [2,3,4,6], [0,1,3,5,6] ]},
%{state: "...##", buttons: [ [2], [0,2,4], [3,4], [1], [0,3,4] ]},
%{state: "#.####", buttons: [ [2,3,5], [0,2,4,5], [2,5], [0,1,3,5] ]},
%{state: "##..#", buttons: [ [3,4], [1,3,4], [0,2,4], [0,2], [0,1,3], [0,3], [1,3] ]},
%{state: "#.##.###", buttons: [ [1,3,4,6,7], [0,5,6,7], [1,2,3,4,7], [0,1,2,3,5,6], [0,5], [0,2,4], [0,1,2,3,4,7], [0,3,4,7] ]},
%{state: "####.#.#..", buttons: [ [1,3,5,7,9], [0,1,3,4,5,7,8,9], [0,1,5,6,9], [0,2,3,5], [3,9], [4,7,8], [0,2,4,5,6,7,8], [1,2,4,7,8,9], [0,1,3,4,6,7,8,9], [1,2,4,6,7], [0,1,2,3,5,6,7,8,9], [0,1,2,3,4,8,9], [9] ]},
%{state: "###.", buttons: [ [3], [0,1,3], [1,3], [0,1,2], [1,2], [0,1] ]},
%{state: "#..#.#", buttons: [ [2,3,4,5], [0,1,4], [0,4,5], [3,5], [0,1,4,5], [0,1,3,5] ]},
%{state: "..####....", buttons: [ [3,4], [0,1,3,4,6,7,8,9], [0,1,3,5,6,7,8], [1,3,4,6], [0,2,4,5,6,7,8], [0,1,2,5,8], [0,2,3,4,5,7,8,9], [0,1,4,8], [4,7,8] ]},
%{state: "###.##...", buttons: [ [1,3,5,7], [1,3,4,7], [0,1,2,5,6,7], [2,3], [0,2,4,6,7,8], [0,5,8], [0,3,8], [0,2,4,5,6,7,8], [2,3,5,7], [0,1,2,3,6,7,8], [0,1] ]},
%{state: "#.#...##.#", buttons: [ [0,1,7,9], [1,2,3,4,5,6,8], [2,3,4,5,6,7,8,9], [0,1,3,4,5,6,7,9], [2,6,8], [0,1,2,3,4,5,6,7,9], [2,6,7,9], [1,6,7,8], [0,1,2,3,6,7,9] ]},
%{state: "#.#.#.#...", buttons: [ [0,1,2,3,5,6,7,9], [1,2,3,4,5,6,7,8,9], [2,4,7], [5], [0,2,3,4,6], [1,2,7,9], [0,2,5,9], [3,6,7,8], [0,1,2,4,6,7,8] ]},
%{state: "...#.#..##", buttons: [ [2,3,5,6,7,8,9], [4,6], [5,8], [0,1,8], [0,1,3,4,5,6,9], [4,5,6], [0,3,4,5,6,7,8], [0,2,4] ]},
%{state: "########.", buttons: [ [0,1,2,3,4,6], [2,5,8], [0,1,2], [3,6,7], [0,1], [0,1,2,3,5,7], [0,3,5,6,8], [0,1,2,4,5,7,8], [0,1,3,6,7], [0,1,4,5] ]},
%{state: "..####.", buttons: [ [2,3,6], [4,5,6], [0,1,2,4,6], [0,2,5,6], [2,4], [0,4,5,6] ]},
%{state: ".#..##.##.", buttons: [ [1,3], [0,2,3,4], [2,4,6,7,9], [0,1,3,4,5,6,7,9], [0,2,6,8,9], [0,1,3,4,5,6], [0,2,3,9], [9], [5,6,8], [1,7], [0,1,3,4,5,6,7,8], [2,3,5,7,8] ]},
%{state: "##...", buttons: [ [0,1,3], [2,3], [0,2], [1,3], [3,4] ]},
%{state: ".#..##.##", buttons: [ [3,7], [0,3,4,5,6,7,8], [0,8], [2,5,6], [1,4,5,7,8], [0,2,7], [0,1,3,8], [2,4,6] ]},
%{state: "#.#.", buttons: [ [0,2], [1,2,3] ]},
%{state: "#.####.#", buttons: [ [0,1,2,3,4,5,7], [0,2,3,4,5,7], [0,1,3,4,6], [0,1,4,5,6], [1,2,4,5,6,7], [1,5,7], [0,3,6,7], [0,1,3,4,5,6], [2,4,6] ]},
%{state: "##.#..", buttons: [ [0,2,3,4,5], [1,2,4,5], [2,3,4], [1,2,3] ]},
%{state: ".#.#..", buttons: [ [1,3], [0], [2,3,5], [2], [1,2,3,5], [0,2,4], [0,4] ]},
%{state: "###.", buttons: [ [0,2], [2], [1,2], [0,1], [0,3], [1,3] ]},
%{state: "###..", buttons: [ [2,3], [1,2,4], [0,1,2], [0,4] ]},
%{state: "..#.", buttons: [ [2], [0,2,3], [0,1,3], [1,3], [0,1,2] ]},
%{state: ".....#.", buttons: [ [1,4,5,6], [0,1,2,4,5,6], [2,3,5,6], [0,2,5], [0,2,4,5,6] ]},
%{state: ".##....", buttons: [ [0,1,3,4,6], [0,2,3,4,5], [1,3,4,5,6], [0,2,3,4,6], [1,2,3,4], [1,3] ]},
%{state: "...###.", buttons: [ [1,2,4], [0,3], [1,2,4,6], [0,1,2,3,4,5], [0,2,4,6], [1,3,4,6], [2], [0,6] ]},
%{state: "#..##...#", buttons: [ [0,2,4], [0,2,3,4,5], [0,1,5,7,8], [0,3,5,6,7], [0,2,8], [0,5,8], [3,4,6,7,8], [6,8] ]},
%{state: ".###.###", buttons: [ [5,6,7], [0,2,3,4,5], [0,4,7], [0,2,3,4,6,7], [0,3,4,5,6,7], [1,4], [0,3], [1,2,3,4,6], [2,4,5,6], [0,1,2,4,7] ]},
%{state: "##..######", buttons: [ [0,3,4,5,8,9], [1,2,3,4,5,6,8], [0,1,3,4,7,8], [3,4,9], [0,1,2,3,4,7,8,9], [2,5,7,8,9], [1], [4,5,6,7,9], [0,1,2,3,4,6,7,9], [0,4,5,8,9], [0,1,2,4,5,7,8], [1,2,3,4,5,6,9], [0,2,3,5,8,9] ]},
%{state: ".#.#", buttons: [ [0,1,2], [1], [2], [2,3] ]},
%{state: "###..", buttons: [ [3], [0,1,3], [1,2,4], [3,4], [0,1,2] ]},
%{state: ".##.#..", buttons: [ [2,3,4,5,6], [1,2,3,5,6], [0,1], [2,4], [0,1,6], [0,1,2,3,4,5], [1,3,5], [0,2], [3,5,6] ]},
%{state: "####.#.", buttons: [ [1,2,3,5,6], [1,3,4], [1,2,4,5], [1,2,3,5], [0,2,3,4,5], [0,1,2,3,5], [0,1,2,4,6], [0,3,4,5] ]},
%{state: "#.#.", buttons: [ [2,3], [0,1,2], [0,3], [1] ]},
%{state: "....##.#", buttons: [ [0,1,3,4,5,6,7], [0,1,2,4,5,7], [5,6], [0,2,5,6,7], [0,3,4,5,6], [1,2,3,6,7], [0,1,4,6] ]},
%{state: "##..###..", buttons: [ [0,2,3,4,5,7], [0,1,2,3,4,7,8], [0,5,6,8], [0,1,3,4,6,7,8], [3,8], [1,2,6,7,8], [0,2,5,6,7,8], [0,1,3,6,7,8], [0,1,2,3,4,5,7] ]},
%{state: "#.##", buttons: [ [1,2,3], [0,2,3] ]},
%{state: "###.###...", buttons: [ [1,2,4,6], [1,3,4,5,6,7,8,9], [2,6,7], [1,2,3,4,6,7,8,9], [0,1,2,5,6,8,9], [0,2,3,5,6,7,8,9], [1,5,7,9], [0,1,2,3,4,5,8,9], [1,3,4,8], [0,2,4,7], [1,2,3,4,5,6,7,9] ]},
%{state: ".###", buttons: [ [0,1,2,3], [1,2,3] ]},
%{state: ".###.#...", buttons: [ [1,2,4,5,6,7,8], [0,1,3,4,6,7], [0,1,3,6,7,8], [0,1,4,6,7,8], [0,1,2,3,5,6,7], [4,5,7], [1,2,4,5,8], [1,2,3,5], [2,3,5,7,8] ]},
%{state: ".#..#....", buttons: [ [0,1,2,5,7,8], [0,1,2,3,5,6], [0,2,3,4,5,8], [0,1,4,5], [0,3,4,6,7,8], [1,2,4,6,8], [0,4,6], [0,3,5,7], [1,3,5,6,7] ]},
%{state: "#..#...#..", buttons: [ [0,3,4,5,6,7], [0,2,4,6,9], [0,2,4,5,6,7,8,9], [2,3,5,6,8], [0,3,5,6,8], [1,6,8], [0,1,2,3,4,5,6], [1,9], [0,1,2,4,5,7], [2,3,5,6], [3,5,7,8], [3,4,9], [2,5,6,7,8] ]},
%{state: "#.....##", buttons: [ [0,6,7], [0,2,3,4,5], [1,2,4,6,7], [0,2,5,6], [1,2,3,4,5,6], [0,1,3,5,6,7], [0,3,4,6,7], [1,3,4,5,6,7] ]},
%{state: "#..#..", buttons: [ [2], [0,2,3,4,5], [0,1,2,5], [1,2,3,5], [0,1,2,3,4], [2,3,4,5], [1,5], [1,2,4] ]},
%{state: ".##..#.", buttons: [ [1,3,4,6], [2,4], [1,3,5,6], [2,4,5], [0,2,3,4,5], [0,2,3,4,5,6], [0,1,2,3,6], [1,4] ]},
%{state: ".####.", buttons: [ [2,3], [0,4,5], [0,1,5], [2], [0,2,3,5], [1,4], [1,2,3,4], [0,2,4,5] ]},
%{state: "##.#.", buttons: [ [2], [0,1], [1,2,3], [3,4], [0], [2,3,4] ]},
%{state: "####.##.", buttons: [ [0,1,2,3,5,6,7], [2,4,6], [0,2,4,5,6], [0,3,4,5,7], [1,3,6,7], [2,3,4,7], [2,3,7], [0,5,7] ]},
%{state: "##.#", buttons: [ [1], [1,2], [0,2,3] ]},
%{state: "###.###...", buttons: [ [0,2,3,4,5,6,7,8], [2,4,5,6,7,8,9], [1,3,5,7,9], [0,1,2,5,8,9], [0,2,3,4,5,6,7,8,9], [0,1,3,5,6,7,8,9], [2], [0,2,4] ]},
%{state: "#..#.###", buttons: [ [4,6,7], [0,3,5,6,7], [0,7], [0,2,5], [0,1,2,4,5,6], [3,6,7], [1,4,5,7] ]},
%{state: "###..###", buttons: [ [2,6], [2,5,6], [2,3,4,5,6,7], [1,6,7], [0,1,2,5,6,7], [1,3,5,6], [0,5,7], [0,2], [1,6], [3,6] ]},
%{state: ".....#.", buttons: [ [0,2,6], [1,3,4], [0,1,4,5,6], [1,3,6], [1,2,4,5], [0,1,2,3,4], [0,1,2,3,5] ]},
%{state: "#.#.", buttons: [ [0,1], [1,3], [0,1,2], [3] ]},
%{state: "..#.", buttons: [ [1,2], [0,2,3], [2] ]},
%{state: "###.", buttons: [ [2,3], [1,2,3], [0,2], [0,1], [1,2] ]},
%{state: ".###.", buttons: [ [1,4], [2,4], [1,2,4], [1,2,3,4], [0,3,4], [0,2,3], [0,3] ]},
%{state: "..#.##.#", buttons: [ [0,3,4,5,6,7], [0,4], [0,1,2,5,6], [0,2,3,4,5,6], [1,2,3,7], [0,1,6,7] ]},
%{state: ".#...#", buttons: [ [2,3,5], [3,4], [0,3], [0,4,5], [0,1,4,5] ]},
%{state: "..#####...", buttons: [ [0,1,2,8,9], [0,3,4,6,7,8,9], [0,1,3,4,6,7,8,9], [0,1,2,5,6,7,8], [0,1,2,4,5,6,7,8,9], [0,1,2,3,4,6,7,8], [1,2,3,4,7,8], [0,1,2,3,4,6,7,9] ]},
%{state: "#.##", buttons: [ [1,2], [2,3], [0,2,3] ]},
%{state: "#....#.##", buttons: [ [4,5,7], [0,1,6,8], [0,1,2,3,4,5,6], [1,2,4,5,6,7,8], [0,5,7,8], [0,2,3,4,5,6,7], [0,1,4,5,6,7,8], [0,3] ]},
%{state: "#..#.#.", buttons: [ [2,3,4,5], [1,2,3,6], [2,6], [0], [0,1,2,3], [1,4], [0,3,5], [4,5] ]},
%{state: ".####.", buttons: [ [0,1,5], [1,5], [0,1,2,3], [0,2], [1,3,4], [0,2,4] ]},
%{state: ".#.##.#", buttons: [ [1,3,4,5,6], [1,2], [0,5,6], [0,1,3], [1,2,3,6], [0,2,4,5], [4,6] ]},
%{state: "##..#....", buttons: [ [0,1,2,3,6,7,8], [1,2,3], [0,2,3,4,5,6,7,8], [0,2,6,7,8], [0,1,4], [2,3,6], [2,3,4,5,6,7,8], [1,5,6], [0,2,3,7,8], [0,1,4,8] ]},
%{state: "#.##.##", buttons: [ [4,5], [0,2,4,5], [0,2,3,5,6], [0,1,2,4,6], [1,5], [0,3,4,6], [0,1,2,3,5,6] ]},
%{state: ".##..###.#", buttons: [ [1,2,5,6,7,9], [0,1,2,4,5,6,7], [0,1,2,3,4,5,7,8,9], [2,5,6,9], [0,5,7,9], [0,2,3,4,5,7,8], [0,1,2,4,5,7], [0,2,3,4,5,6,9] ]},
%{state: "#.##.###", buttons: [ [1,2,3,4,5,6,7], [2,4], [0,1,4], [1,7], [3,5], [3], [1], [0,1,2,4,5,7], [0,2,3,5,6,7] ]},
%{state: "#..#", buttons: [ [0,2], [0,1,2], [1,3], [0,3] ]},
%{state: "#.#.###.#", buttons: [ [0,2,3,4,5,8], [1,3,5], [0,2,3,4,7,8], [2,5,6,8], [0,2,3,4,5,6,7], [5,6], [0,1,4,5,6], [2,6,7,8], [2], [3,7] ]},
%{state: "#..##", buttons: [ [0,2,4], [2,4], [0,1,3], [1,3], [0,3], [1,2,3], [1] ]},
%{state: ".#..#", buttons: [ [0,2], [1,4], [0,1,3], [0,4] ]},
%{state: "#.#..", buttons: [ [0,1], [0,2], [1,2,3], [1,4], [0,3], [2,3,4] ]},
%{state: ".###...", buttons: [ [2,4,6], [2,3], [0,1,2,3,5], [0,2,3,4,5], [1,5,6], [1,2,3,5,6], [0,3] ]},
%{state: "#..##.#.", buttons: [ [0,3,4,6], [1,5,6], [1,4,7], [0,1,2,3,5,6,7], [1], [0,1,2,3], [0,2,5,7], [0,1,2,3,4,6], [2,3,4,5,6,7], [0,2,3,4,5,7] ]},
%{state: "...#", buttons: [ [1], [0,3], [0], [0,1,2], [0,2,3], [1,2,3] ]},
%{state: "...#....", buttons: [ [3,4,5,7], [0,2,3], [1,4], [0,1,3,4,5,6], [0,2,6,7], [1,4,7], [1,2,4,5,7], [3,7], [0,1,2,3,6] ]}
]

defmodule Toggle do
  def press(state, positions) do
    state
    |> String.graphemes()
    |> Enum.with_index()
    |> Enum.map(fn {char, idx} ->
        if idx in positions, do: toggle(char), else: char
      end)
    |> Enum.join()
  end

  defp toggle("."), do: "#"
  defp toggle("#"), do: "."
end

defmodule Solver do
  def subsets([]), do: [[]]
  def subsets([h | t]) do
    rest = subsets(t)
    rest ++ Enum.map(rest, fn subset -> [h | subset] end)
  end

  def press_all(state, buttons) do
    Enum.reduce(buttons, state, fn button, acc ->
      Toggle.press(acc, button)
    end)
  end

  def find_solutions(target_state, buttons) do
    empty = String.duplicate(".", String.length(target_state))

    buttons
    |> subsets()
    |> Enum.filter(fn combo ->
      press_all(empty, combo) == target_state
    end)
  end
end

total =
  Enum.map(input, fn %{state: target, buttons: buttons} ->
    solutions = Solver.find_solutions(target, buttons)
    min_solution = Enum.min_by(solutions, &length/1)
    min_count = length(min_solution)
    min_count
  end)
  |> Enum.sum()

IO.puts("#{total}")
